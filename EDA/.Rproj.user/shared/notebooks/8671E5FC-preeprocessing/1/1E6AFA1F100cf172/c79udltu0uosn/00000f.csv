"0","preprocess_split <- function(df, train_idx, test_idx) {"
"0",""
"0","  # 1) Explicit split"
"0","  train <- df[train_idx, , drop = FALSE]"
"0","  test  <- df[test_idx,  , drop = FALSE]"
"0",""
"0","  # 2) Identify numeric predictors (V1â€“V5)"
"0","  num_vars <- sapply(train, is.numeric)"
"0",""
"0","  # 3) Fit Z-score scaling on TRAIN"
"0","  zfit <- zscore_fit(train[, num_vars, drop = FALSE])"
"0",""
"0","  # 4) Apply scaling"
"0","  train_scaled <- zscore_transform(train[, num_vars, drop = FALSE], zfit)"
"0","  test_scaled  <- zscore_transform(test[,  num_vars, drop = FALSE], zfit)"
"0",""
"0","  # Replace numeric columns with scaled versions"
"0","  train[, num_vars] <- train_scaled"
"0","  test[,  num_vars] <- test_scaled"
"0",""
"0","  # 5) Build X/y objects"
"0","  X_train <- subset(train, select = -Class)"
"0","  y_train <- train$Class"
"0",""
"0","  X_test <- subset(test, select = -Class)"
"0","  y_test <- test$Class"
"0",""
"0","  list("
"0","    X_train = X_train,"
"0","    y_train = y_train,"
"0","    X_test  = X_test,"
"0","    y_test  = y_test,"
"0","    params  = list(zscore = zfit)"
"0","  )"
"0","}"
"0",""
